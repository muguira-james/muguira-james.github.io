<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Creating a basic React map app with Leaflet | My musing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Use OpenStreetMap, Leaflet and ReactJS">
<meta property="og:type" content="article">
<meta property="og:title" content="Creating a basic React map app with Leaflet">
<meta property="og:url" content="http://muguira-james.github.io/2018/09/22/2018-09-22-A-creating-basic-React-app-with-a-leaflet-map/index.html">
<meta property="og:site_name" content="My musing">
<meta property="og:description" content="Use OpenStreetMap, Leaflet and ReactJS">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://muguira-james.github.io/images/create-react-app-initial.png">
<meta property="og:image" content="http://muguira-james.github.io/images/indy.png">
<meta property="article:published_time" content="2018-09-22T20:27:12.000Z">
<meta property="article:modified_time" content="2021-10-22T21:21:16.686Z">
<meta property="article:author" content="James Muguira">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://muguira-james.github.io/images/create-react-app-initial.png">
  
    <link rel="alternate" href="/atom.xml" title="My musing" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">My musing</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">A place to write and describe</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://muguira-james.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-2018-09-22-A-creating-basic-React-app-with-a-leaflet-map" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/22/2018-09-22-A-creating-basic-React-app-with-a-leaflet-map/" class="article-date">
  <time class="dt-published" datetime="2018-09-22T20:27:12.000Z" itemprop="datePublished">2018-09-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Programming/">Programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Creating a basic React map app with Leaflet
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Use OpenStreetMap, Leaflet and ReactJS</p>
<span id="more"></span>

<p>Use OpenStreetMap, Leaflet and ReactJS</p>
<p>Google and Bing are not the only way to create beautiful map applications!  This post will employ OpenStreetMap and Leaflet in a React based application.  The advantage of this approach is NO license issues.  Granted Google is very liberal about the number of map loads (something around 100,000) before they start charging. But why worry?  The full source code for the project can be found on github ( <a target="_blank" rel="noopener" href="https://github.com/muguira-james/toysoldiergolf">link to github</a></p>
<h1 id="Introduction-to-OpenStreetMap-and-Leaflet"><a href="#Introduction-to-OpenStreetMap-and-Leaflet" class="headerlink" title="Introduction to OpenStreetMap and Leaflet"></a>Introduction to OpenStreetMap and Leaflet</h1><p>OpenStreetMap is an open source project supported by a global community.  Anybody can contribute.  From the OpenStreetMap site: </p>
<p>OpenStreetMap emphasizes local knowledge. Contributors use aerial imagery, GPS devices, and low-tech field maps to verify that OSM is accurate and up to date.</p>
<p>One of the great things about OpenStreetMap is that the content is free to use, just so long as you give them credit.</p>
<p>Leaflet is a javascript library used to create interactive maps.  It is small, fast and very easy to learn and use. Using Leaflet in a browser is as easy as including the following code is a <script> tag:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// create a map with an initial location</span><br><span class="line">var map = L.map(&#x27;map&#x27;).setView([51.505, -0.09], 13);</span><br><span class="line"></span><br><span class="line">// maps are organized as tiles.  This brings in tiles around the initial location</span><br><span class="line">L.tileLayer(&#x27;https://&#123;s&#125;.tile.openstreetmap.org/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png&#x27;, &#123;</span><br><span class="line"></span><br><span class="line">    attribution: &#x27;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; </span><br><span class="line">contributors&#x27;&#125;).addTo(map);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>I am assuming you will have included a reference to the leaflet libraries earlier in your html code.  We’ll examine how to do this latter in this post.  Let’s break the above snippet down so we understand it.  The first think to notice is the line “var map = “.  That tells leaflet to create a map object and to position the map over the point: latitude = 51.05, longitude=-0.09.  That point is very close to Hyde park, London.  The ‘13’ is the zoom factor.  A larger number zooms closer in showing more detail and smaller numbers zoom out showing greater amounts of land.</p>
<p>Map images are drawn from satellite imagery.  The cartographer or map creator breaks the satellite image down into small squares or tiles and stores them in a database. The next lines in the code snippet tells Leaflet where to gather the tiles from and adds these tiles into the map object we created on the first line.</p>
<h1 id="React-and-Creating-a-React-Application"><a href="#React-and-Creating-a-React-Application" class="headerlink" title="React and Creating a React Application"></a>React and Creating a React Application</h1><p>This post is focused on creating a React app so let’s talk about how to get started with React! I will use nodejs (I have version 9.X on my mac) and create-react-app to start the project.  Use npm to install create-react-app (npm install -g create-react-app). The sample project is called “toy soldier golf”.  It shows you images of toy soldiers located around the various holes on a golf course.  This initial post just shows the golf course image and statically positions the toy soldiers. Later installations of the post will include graphql to dynamically bring in the soldier location data and incorporate subscriptions to update their location.  First, let’s create our project:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">create-react-app toysoldiergolf</span><br><span class="line">cd toysoldiergolf</span><br><span class="line">npm install</span><br><span class="line">npm start</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The last command in the above code block will start a development server and open a tab in your browser.  You should have the following showing in your browser.</p>
<p><img src="/images/create-react-app-initial.png" alt="create-react-app-initial.png"></p>
<p>Now, we can edit the source and build what we want.  If you list the directory contents you will see 2 directories: public and src.  Public/ contains the index.html file for the application and src/ contains the App.js file.  Let’s look at the index.html file first.  In the following I’ve removed all of the comments AND I’ve added a couple of key items we will need.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.3.3/dist/leaflet.css&quot;</span><br><span class="line">   integrity=&quot;sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==&quot;</span><br><span class="line">   crossorigin=&quot;&quot;/&gt;</span><br><span class="line">     &lt;!-- Make sure you put this AFTER Leaflet&#x27;s CSS --&gt;</span><br><span class="line"> &lt;script src=&quot;https://unpkg.com/leaflet@1.3.3/dist/leaflet.js&quot;</span><br><span class="line"> integrity=&quot;sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q==&quot;</span><br><span class="line"> crossorigin=&quot;&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;React App&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      .leaflet-container &#123;</span><br><span class="line">          height: 600px;</span><br><span class="line">          width: 600px;</span><br><span class="line">      &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;noscript&gt;</span><br><span class="line">      You need to enable JavaScript to run this app.</span><br><span class="line">    &lt;/noscript&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line"> </span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The original file generated from create-react-app contains: 2 “Link” tags. I’ve added a third one that brings in the Leaflet library CSS file (lines 10-16).  At the time of writing this article, Leaflet was version 1.3.3.  The next item added is the Leaflet source.  The last item added is a little further down, under the html Title tag.  We added a style tag (lines 19-23) to set the size of the Leaflet container on the page.  Experiment with these numbers (height: 600px, width: 600px)!!</p>
<p>Now, let’s consider the file src/App.js in the following snippet: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br><span class="line">import ShowMap from &#x27;./ShowMap&#x27;</span><br><span class="line"></span><br><span class="line">var golfCourse = require(&#x27;./indy.json&#x27;)</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ShowMap golfCourse=&#123;golfCourse&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>With the changes to App.js, you now have the basic framework. </p>
<h1 id="Where-next"><a href="#Where-next" class="headerlink" title="Where next?"></a>Where next?</h1><p>Let’s step back and consider what we are trying to do. We want to show a golf course and place images near some of the holes on a golf course. We would like the program to be driven from data files (and later a dynamic graphql based feed). The first data file we need is a golf course.  I will structure the golf course data file using the GeoJSON specification.  GeoJSON creates a javascript object with an array of “Features” that include detailed information in properties about each feature. Also, notice the section called ‘initialRegion”.  When we render the map, we’ll use the data in this section to position the map over the golf course.  So, the first 2 holes on the course would be described like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">s''“type”: “Feature”,</span><br><span class="line">s''“properties”: &#123;</span><br><span class="line">s''s''“FlagLocation: &#123;</span><br><span class="line">s''s''s''&quot;latitude&quot;: 39.79634856773296,</span><br><span class="line">          			&quot;longitude&quot;: -86.2293832770481</span><br><span class="line">        		&#125;,</span><br><span class="line">s''s''“number”: 1,</span><br><span class="line">s''&#125;,</span><br><span class="line">s''“type”: “Feature”,</span><br><span class="line">s''“properties”: &#123;</span><br><span class="line">s''s''&quot;FlagLocation&quot;: &#123;</span><br><span class="line">          			&quot;latitude&quot;: 39.80071624700618,</span><br><span class="line">          			&quot;longitude&quot;: -86.22896065955706</span><br><span class="line">       	 	&#125;,</span><br><span class="line">s''s''“number”: 2,</span><br><span class="line">s''&#125;</span><br><span class="line">…</span><br><span class="line"></span><br><span class="line">s''  &quot;initialRegion&quot;: &#123;</span><br><span class="line">    		&quot;latitude&quot;: 39.79519990082653,</span><br><span class="line">    		&quot;longitude&quot;: -86.22999179295153,</span><br><span class="line">    		&quot;latitudeDelta&quot;: 0.0005,</span><br><span class="line">    		&quot;longitudeDelta&quot;: 0.0020</span><br><span class="line">  	&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>I clicked the green on each hole on google maps to get the latitude and longitude entries. </p>
<p>Once the golf course has been specified we can start to modify the arc/App.js file.  Instead of placing all the code in one file I’ll use React’s composition powers to structure the project.  Let’s make a src/ShowMap.js component to hold the map rendering logic.  In a later version of this project you will see why I move map rendering out of App. ShowMap will handle getting the map tiles, setup and map rendering.  We will use the entries in the golf course file we just worked through to guide map rendering.</p>
<p>Leaflet and React are two separate libraries and they don’t play together very nicely.  Leaflet wants to control everything to do with the map.  When you work with just Leaflet you use event listeners to have it change appearance due to external stimulus.  We only view the map, so this is not a problem for us.  To make this project even easier, we’ll use a npm package called ‘react-leaflet’.  The designers of the package have encapsulated leaflet interaction with React.  In this instance, we are going to use the Map component, providing it with enough details to get the map on the screen.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">import &#123; Map, TileLayer, Marker, Popup &#125; from &#x27;react-leaflet&#x27;;</span><br><span class="line">import L from &#x27;leaflet&#x27;</span><br><span class="line"></span><br><span class="line">class ShowMap extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">  // create a location object out of a &#123; Latitude, Longitude &#125;</span><br><span class="line">  createMarkerLocation = (f) =&gt; &#123;</span><br><span class="line">    let floc = []</span><br><span class="line">    floc.push(f.latitude)</span><br><span class="line">    floc.push(f.longitude)</span><br><span class="line">    return floc</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render = () =&gt; &#123;</span><br><span class="line">    let pos = this.createMarkerLocation(course.initialRegion);</span><br><span class="line">    return (</span><br><span class="line">      &lt;Map</span><br><span class="line">        center=&#123;pos&#125;</span><br><span class="line">        zoom=&#123;16&#125;&gt;</span><br><span class="line">        &lt;TileLayer</span><br><span class="line">          url=&quot;https://&#123;s&#125;.tile.openstreetmap.org/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png&quot;</span><br><span class="line">          attribution=&quot;&amp;copy; &lt;a href=&amp;quot;http://osm.org/copyright&amp;quot;&gt;OpenStreetMap&lt;/a&gt; contributors&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/Map&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default ShowMap;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Let’s examine that code block. We import the Map, Tile and Marker components from react-leaflet.  The react-leaflet component needs a “center” and a “zoom” factor.  I hard coded the “zoom” factor for now (line 21).  The “center” object is an array of [ latitude, longitude ] (line 20).  The TileLayer requires a url pointing to the OpenStreetMap tile set.  See the OpenStreetMap docs to understand what you can do with that url.</p>
<p>Restarting the app with yarn start (or saving the files if you left things running) should produce the following screen:</p>
<p><img src="/images/indy.png" alt="indy.png"></p>
<h1 id="But-wait-where-do-those-red-flags-and-toy-soldiers-come-from"><a href="#But-wait-where-do-those-red-flags-and-toy-soldiers-come-from" class="headerlink" title="But wait, where do those red flags and toy soldiers come from?"></a>But wait, where do those red flags and toy soldiers come from?</h1><p>Ok, that is the final screen!  Let’s get that going. The first thing we need is to draw a marker at each red flag.  To do that we will loop over the course file that was passed in as a prop to ShowMap.  </p>
<p>As a bit of debugging, try placing the following as the first statement inside the render() function: console.log(“props-&gt;”, this.props).  In the browser console you will see that App passed the course file definition down to ShowMap.  We will use a javascript map function to loop over that course file and create a marker for each flag.  Change the render function to the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// render the current state of the app</span><br><span class="line">render = () =&gt; &#123;</span><br><span class="line">  console.log(&quot;p-&gt;&quot;, this.props)</span><br><span class="line">  let course = this.props.golfCourse</span><br><span class="line">  // convert the prop initialRegion into a Leaflet position</span><br><span class="line">  let pos = this.createMarkerLocation(course.initialRegion);</span><br><span class="line"></span><br><span class="line">  // reset the playerDrawing map</span><br><span class="line">  playerDrawingUtils.mapLocationClear()</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Map</span><br><span class="line">      center=&#123;pos&#125;</span><br><span class="line">      zoom=&#123;16&#125;&gt;</span><br><span class="line">      &lt;TileLayer</span><br><span class="line">        url=&quot;https://&#123;s&#125;.tile.openstreetmap.org/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png&quot;</span><br><span class="line">        attribution=&quot;&amp;copy; &lt;a href=&amp;quot;http://osm.org/copyright&amp;quot;&gt;OpenStreetMap&lt;/a&gt; contributors&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          course.Features.map((f, n) =&gt; &#123;</span><br><span class="line">            return this.createMarker(f.properties.number, f.properties.FlagLocation)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/Map&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>Note that we added a map over the course file in lines 19-23.  The definition for createMarker is found on the accompanying <a target="_blank" rel="noopener" href="https://github.com/muguira-james/toysoldiergolf">github</a></p>
<p>Now let’s get the soldiers showing.  First, let’s make a simple array to hold the soldier locations.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">// as you can see from this structure the players are on hole &#123;1, 2, 3, 4&#125;</span><br><span class="line">const players = [</span><br><span class="line">  &#123;FirstName: &quot;Joan&quot;, LastName: &quot;Jet&quot;, ID: 1, Hole: 1, HoleLocation: &quot;TEE&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Ruth&quot;, LastName: &quot;Crist&quot;, ID: 2, Hole: 1, HoleLocation: &quot;TEE&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Beth&quot;, LastName: &quot;Flick&quot;, ID: 3, Hole: 1, HoleLocation: &quot;TEE&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Julie&quot;, LastName: &quot;Ant&quot;, ID: 4, Hole: 1, HoleLocation: &quot;FWY&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Ginny&quot;, LastName: &quot;Grey&quot;, ID: 5, Hole: 1, HoleLocation: &quot;FWY&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Paula&quot;, LastName: &quot;Lamb&quot;, ID: 6, Hole: 1, HoleLocation: &quot;GRN&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Ingid&quot;, LastName: &quot;Jones&quot;, ID: 7, Hole: 2, HoleLocation: &quot;TEE&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Kelly&quot;, LastName: &quot;Smith&quot;, ID: 8, Hole: 2, HoleLocation: &quot;FWY&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Eilean&quot;, LastName: &quot;Rams&quot;, ID: 9, Hole: 2, HoleLocation: &quot;GRN&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Barb&quot;, LastName: &quot;Sharp&quot;, ID: 10, Hole: 4, HoleLocation: &quot;FWY&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Carol&quot;, LastName: &quot;Adams&quot;, ID: 11, Hole: 4, HoleLocation: &quot;FWY&quot;&#125;,</span><br><span class="line">  &#123;FirstName: &quot;Faith&quot;, LastName: &quot;Hope&quot;, ID: 12, Hole: 4, HoleLocation: &quot;GRN&quot;&#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Inspecting the array, we are providing the soldier name, their ID, the hole they are on and the location on the hole (tee, fairway or green). This block is included in to ShowMap between the inport statements and the definition of the ShowMap component.  We can now create a map over the soldier array and use Leaflet capabilities to create and show markers on the map.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">            players.map((p, n) =&gt; &#123;</span><br><span class="line">              let name = p.FirstName + &quot; &quot; + p.LastName</span><br><span class="line">              let plyr = this.createPlayer(n+1, name, p.Hole, p.HoleLocation, course)</span><br><span class="line">              return plyr</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>There are a few functions not shown to save space.  A leaflet marker needs a position (an array of [latitude, longitude]) and an icon.  We are also providing the soldier name to the leaflet popup so when you click on a soldier their name pops up.  The images for the soldiers are arranged as a dictionary and indexed by number.  The same scheme is used for the flags.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>This article has walked through just enough information to show a map in a React app.  The project used ReactJS, Leaflet and a node component called react-leaflet.  The map is a simple base map.  There are MANY more maps available from the OpenStreetMap collection.  The next article in this series will explore more of the OpenStreetMap collection.  But, the main focus of the next article is to bring GraphQL in to make the toysoldier player positions dynamic.</p>
<p>I hope you found this useful, thank you!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://muguira-james.github.io/2018/09/22/2018-09-22-A-creating-basic-React-app-with-a-leaflet-map/" data-id="ckva9a7ga0006gke81l00c7nm" data-title="Creating a basic React map app with Leaflet" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/10/06/2018-10-06-JUnit-Testing-in-Java/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          JUnit Testing in java
        
      </div>
    </a>
  
  
    <a href="/2018/01/03/2018-01-03-A-SMACIT-impacts-on-business/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">SMACIT impacts on business</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Containers/">Containers</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Design/">Design</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/">Programming</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Containers/">Containers</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Containers/" rel="tag">Containers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cucumber/" rel="tag">Cucumber</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design/" rel="tag">Design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Insight/" rel="tag">Insight</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/" rel="tag">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jest/" rel="tag">Jest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mobile/" rel="tag">Mobile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/" rel="tag">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/" rel="tag">Node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REST/" rel="tag">REST</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Racket/" rel="tag">Racket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Containers/" style="font-size: 10px;">Containers</a> <a href="/tags/Cucumber/" style="font-size: 10px;">Cucumber</a> <a href="/tags/Design/" style="font-size: 10px;">Design</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/Insight/" style="font-size: 10px;">Insight</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Jest/" style="font-size: 10px;">Jest</a> <a href="/tags/Mobile/" style="font-size: 10px;">Mobile</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Node/" style="font-size: 10px;">Node</a> <a href="/tags/REST/" style="font-size: 10px;">REST</a> <a href="/tags/Racket/" style="font-size: 16.67px;">Racket</a> <a href="/tags/React/" style="font-size: 13.33px;">React</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/25/A-message-queue-in-racket-part-5/">A-message-queue-in-racket-part-5</a>
          </li>
        
          <li>
            <a href="/2021/10/24/A-message-queue-in-racket-part-4/">A-message-queue-in-racket-part-4</a>
          </li>
        
          <li>
            <a href="/2021/10/22/A-message-queue-in-racket-part-3/">A-message-queue-in-racket-part-3</a>
          </li>
        
          <li>
            <a href="/2021/10/22/A-message-queue-racket-part-2/">A Message queue in Racket - part 2</a>
          </li>
        
          <li>
            <a href="/2021/10/13/A-message-Queue-in-Racket/">Using Racket to define a message queue - part 1</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 James Muguira<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>