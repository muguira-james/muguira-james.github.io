{"title":"A-message-queue-in-racket-part-4","date":"2021-10-24T16:36:11.000Z","date_formatted":{"ll":"Oct 24, 2021","L":"10/24/2021","MM-DD":"10-24"},"link":"2021/10/24/A-message-queue-in-racket-part-4","tags":["Racket"],"categories":["Programming","message queue"],"updated":"2022-01-26T02:24:54.563Z","content":"<p>building a message queue  in Racket - part 4</p>\n<span id=\"more\"></span>\n<h1 id=\"table-of-contents\">Table of Contents<a title=\"#table-of-contents\" href=\"#table-of-contents\"></a></h1>\n<ul>\n<li>Restructuring the code</li>\n<li>The Front-door</li>\n<li>The middleware</li>\n</ul>\n<h1 id=\"introduction\">Introduction<a title=\"#introduction\" href=\"#introduction\"></a></h1>\n<p>The previous articles in this series laid the foundation for a message queue  similar to RabbitMQ or Apache’s ActiveMQ.  The message queue presents an API that allows you to add or delete message from topics. There is also an administrative API interface to view and manipulate the topic store.</p>\n<p>This article will clean up the code structure and get us in a position so we can apply testing to the system.  As it stands, the code works, but it does have bugs. It is also in a single 200+ line file. We are going to split the code up so it looks more like the architecture.</p>\n<p>For the git repo <a href=\"https://github.com/muguira-james/racket-stuff.git\" target=\"_blank\">see the message-que directory</a>.</p>\n<p>The original code for the previous articles is in the jam-message-que directory.</p>\n<p><img src=\"/images/MQ-Architecture-1.png\" alt=\"System Architecture\" loading=\"lazy\" class=\"φbp\"></p>\n<p>The system architecture has 3 distinct components: a front-door, a topic store, and some middleware to manipulate the topic store.  We are going to use Racket’s module syntax to split the code into 3 files.</p>\n<h1 id=\"the-front-door\">The front-door<a title=\"#the-front-door\" href=\"#the-front-door\"></a></h1>\n<p>The front-door is all the code required to present the API and interact with http services expose from the Racket libraries. At  high level, the front-door is structured like this:</p>\n<ul>\n<li>server start-up, ports paths, TCP-IP considerations</li>\n<li>decoding the http requests and dispatching the right handler</li>\n<li>creating a valid JSON response</li>\n<li>formating and returning the http response in ‘application/JSON’ format to the caller.</li>\n</ul>\n<p>In code form, the front-door looks like this:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#lang racket</span><br><span class=\"line\">;</span><br><span class=\"line\">; -------------------------------------------</span><br><span class=\"line\">; define a simple message queue</span><br><span class=\"line\">;</span><br><span class=\"line\"></span><br><span class=\"line\">(require web-server/servlet) </span><br><span class=\"line\">(require web-server/servlet-env)</span><br><span class=\"line\">(require json)</span><br><span class=\"line\">(require data/queue)</span><br><span class=\"line\"></span><br><span class=\"line\">;</span><br><span class=\"line\">; pull in the middleware code for manipulating the topic-hash</span><br><span class=\"line\">(require &quot;middleware.rkt&quot;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define (hello request)</span><br><span class=\"line\">  (http-response (format &quot;hello: today&quot;)))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (do-nothing request)</span><br><span class=\"line\">  ; just say nothing useful</span><br><span class=\"line\">  (http-response &quot;&lt;div&gt;welcome to &lt;span style=\\&quot;color:blue\\&quot;&gt;jamQ&lt;/span&gt;&lt;/div&gt;&quot;))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (greeting-page request)</span><br><span class=\"line\">  ; say hi</span><br><span class=\"line\">  (http-response (list-ref &#x27;(&quot;Hi&quot; &quot;Hello&quot;) (random 2))))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define (enque request)</span><br><span class=\"line\">  ; put something in a queue</span><br><span class=\"line\">  ; input: &#123; topic: &quot;name&quot;, payload: &quot;data-type&quot; &#125;</span><br><span class=\"line\">  (let* ([hsh (request-&gt;jshash request)]</span><br><span class=\"line\">         [topic-name (hash-ref hsh &#x27;topicname)]</span><br><span class=\"line\">         [payload-data (hash-ref hsh &#x27;payload)])</span><br><span class=\"line\">    (begin         </span><br><span class=\"line\">      (add-data-to-topic topic-name payload-data)</span><br><span class=\"line\">    </span><br><span class=\"line\">      (let ([rtn (make-hash)])</span><br><span class=\"line\">        (build-json-response rtn &#x27;cmd &quot;enque&quot;)</span><br><span class=\"line\">        (build-json-response rtn &#x27;topic-name topic-name)</span><br><span class=\"line\">        (build-json-response rtn &#x27;data payload-data)</span><br><span class=\"line\"></span><br><span class=\"line\">        (displayln (with-output-to-string (lambda () (write-json  rtn))))</span><br><span class=\"line\">        (http-response (with-output-to-string (lambda  () (write-json rtn))))))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (deque request)</span><br><span class=\"line\">  ; check if topic exists, remove 1st item from topic queue</span><br><span class=\"line\">  (let* ([js-hsh (request-&gt;jshash request)]</span><br><span class=\"line\">         [topic-name (hash-ref js-hsh &#x27;topicname)]</span><br><span class=\"line\">         [rtn (make-hash)]</span><br><span class=\"line\">         [datam (remove-data-from-topic topic-name)])</span><br><span class=\"line\">    (begin</span><br><span class=\"line\">      (build-json-response rtn &#x27;topic-name topic-name)</span><br><span class=\"line\">      (build-json-response rtn &#x27;payload  datam)</span><br><span class=\"line\">      (displayln (with-output-to-string (lambda () (write-json rtn))))</span><br><span class=\"line\">      (http-response (with-output-to-string (lambda  () (write-json rtn)))))))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define (topic-list request)</span><br><span class=\"line\">  ; show me all the topics in the topic-hash</span><br><span class=\"line\">  (begin</span><br><span class=\"line\">    (let* ([rtn (make-hash)])</span><br><span class=\"line\">      (build-json-response rtn &#x27;topic-list (hash-keys topic-hash))</span><br><span class=\"line\">      (displayln (with-output-to-string (lambda () (write-json rtn))))</span><br><span class=\"line\">      (http-response (with-output-to-string (lambda() (write-json rtn)))))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (topic-count request)</span><br><span class=\"line\">  ; show me a count of topics</span><br><span class=\"line\">  ; input: &#123; count-topics: &quot;all&quot; &#125;</span><br><span class=\"line\">  (begin</span><br><span class=\"line\">    (let ([rtn (make-hash)])</span><br><span class=\"line\">      (build-json-response rtn &#x27;topic-count (hash-count topic-hash))</span><br><span class=\"line\">      (displayln (with-output-to-string (lambda () (write-json rtn))))</span><br><span class=\"line\">      (http-response (with-output-to-string (lambda () (write-json rtn)))))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (topic-data request)</span><br><span class=\"line\">  ; list all data in a topic</span><br><span class=\"line\">  (let* ([hsh (request-&gt;jshash request)]</span><br><span class=\"line\">         [topic-name (hash-ref hsh &#x27;quename)]</span><br><span class=\"line\">         [rtn (make-hash)])</span><br><span class=\"line\">        (build-json-response rtn &#x27;topic-name topic-name)</span><br><span class=\"line\">        (build-json-response rtn &#x27;topic-list (queue-&gt;list (hash-ref topic-hash topic-name)))</span><br><span class=\"line\">        (displayln (with-output-to-string (lambda () (write-json rtn))))</span><br><span class=\"line\">        (http-response (with-output-to-string (lambda () (write-json rtn))))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (drain-queue request)</span><br><span class=\"line\">  (let* ([hsh (request-&gt;jshash request)]</span><br><span class=\"line\">         [topic-name (hash-ref hsh &#x27;quename)]</span><br><span class=\"line\">         [rtn (make-hash)])</span><br><span class=\"line\">    (hash-set! topic-hash topic-name (make-queue))</span><br><span class=\"line\">    (build-json-response rtn &#x27;cmd &quot;drain-queue&quot;)</span><br><span class=\"line\">    (build-json-response rtn &#x27;topic-name topic-name)</span><br><span class=\"line\">    (build-json-response rtn &#x27;message (format &quot;drain-queue: ~v: all data deleted&quot; topic-name)</span><br><span class=\"line\">    (displayln (with-output-to-string (lambda () (write-json rtn))))</span><br><span class=\"line\">    (http-response (with-output-to-string (lambda ()  (write-json  rtn)))))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (topic-remove request)</span><br><span class=\"line\">  (let* ([hsh  (request-&gt;jshash request)]</span><br><span class=\"line\">         [topic-name (hash-ref hsh &#x27;quename)]</span><br><span class=\"line\">         [rtn (make-hash)])</span><br><span class=\"line\">    (hash-remove! topic-hash topic-name)</span><br><span class=\"line\">    (build-json-response rtn &#x27;message (format &quot;topic-remove: removed topic ~v&quot; topic-name))</span><br><span class=\"line\">    (displayln (with-output-to-string (lambda  () (write-json rtn))))</span><br><span class=\"line\">    (http-response (with-output-to-string (lambda () (write-json rtn))))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (build-json-response hsh key value)</span><br><span class=\"line\">  (hash-set! hsh key value))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (http-response content)  </span><br><span class=\"line\">  (response/full</span><br><span class=\"line\">    200                  ; HTTP response code.</span><br><span class=\"line\">    #&quot;OK&quot;                ; HTTP response message.</span><br><span class=\"line\">    (current-seconds)    ; Timestamp.</span><br><span class=\"line\">    TEXT/HTML-MIME-TYPE  ; MIME type for content.</span><br><span class=\"line\">    &#x27;()                  ; Additional HTTP headers.</span><br><span class=\"line\">    (list                ; Content (in bytes) to send to the browser.</span><br><span class=\"line\">      (string-&gt;bytes/utf-8 content))))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define-values (dispatch generate-url)</span><br><span class=\"line\">  ;; URL routing table (URL dispatcher).</span><br><span class=\"line\">  (dispatch-rules</span><br><span class=\"line\">   [(&quot;&quot;) do-nothing]</span><br><span class=\"line\">   [(&quot;hello&quot;) hello]  ; check to see if the service is working</span><br><span class=\"line\">   [(&quot;enque&quot;) #:method &quot;post&quot; enque]</span><br><span class=\"line\">   [(&quot;deque&quot;) #:method &quot;post&quot; deque]</span><br><span class=\"line\">   [(&quot;topic-list&quot;) topic-list]</span><br><span class=\"line\">   [(&quot;topic-count&quot;) topic-count]</span><br><span class=\"line\">   [(&quot;topic-data&quot;) #:method &quot;post&quot; topic-data]</span><br><span class=\"line\">   [(&quot;drain-queue&quot;) #:method &quot;post&quot; drain-queue]</span><br><span class=\"line\">   [(&quot;topic-remove&quot;) #:method &quot;post&quot; topic-remove]</span><br><span class=\"line\">   [else (error &quot;page not found&quot;)]))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define (request-handler request)</span><br><span class=\"line\">  (dispatch request))</span><br><span class=\"line\"></span><br><span class=\"line\">;; Start the server.</span><br><span class=\"line\">(serve/servlet</span><br><span class=\"line\">  request-handler</span><br><span class=\"line\">  #:launch-browser? #f</span><br><span class=\"line\">  #:quit? #f</span><br><span class=\"line\">  ; have to listen on the  right host NOT 127.0.0.1</span><br><span class=\"line\">  #:listen-ip &quot;0.0.0.0&quot;</span><br><span class=\"line\">  #:port 8000</span><br><span class=\"line\">  #:servlet-regexp #rx&quot;&quot;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Really, nothing new here if you have been following this series. The only new thing is the restructuring.  line 14 of the above listing is where we use Racket’s ‘require’ statement to bring the middleware code in.</p>\n<h1 id=\"the-middleware-code\">The middleware code<a title=\"#the-middleware-code\" href=\"#the-middleware-code\"></a></h1>\n<p>The middleware manipulates the topic-hash. If we add a message to the topic-hash, that means we first, check to see if the topic is present. If it is not, then we make a queue, add the message to that queue and then add that queue to the topic-hash under the missing topic name. If the topic is present, we simply get the queue associated with that topic-name and add the message.</p>\n<p>Splitting the middleware out from the front-door will make testing easier and provides better code structure. For testing of  the overall system, we want to test the middleware code using Racket test capabilities and test the front-door using something like cucumber or Mocha.</p>\n<p>The middleware code follows:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#lang racket</span><br><span class=\"line\"></span><br><span class=\"line\">(require web-server/servlet) </span><br><span class=\"line\">(require web-server/servlet-env)</span><br><span class=\"line\">(require json)</span><br><span class=\"line\">(require data/queue)</span><br><span class=\"line\">  ;  (require gregor)</span><br><span class=\"line\"></span><br><span class=\"line\">;; a hash is structured as a topic and a queue</span><br><span class=\"line\">(define topic-hash (make-hash))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define (contains-topic key)</span><br><span class=\"line\">  ;; is key in this hash</span><br><span class=\"line\">  (if (member key (hash-keys topic-hash))</span><br><span class=\"line\">      #t</span><br><span class=\"line\">      #f))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (add-data-to-topic key data)</span><br><span class=\"line\">  ;; check to see if key is in the topic-hash and add data to the correct topic</span><br><span class=\"line\">  (if (contains-topic key)</span><br><span class=\"line\">      (enqueue! (hash-ref topic-hash key) data)</span><br><span class=\"line\">      (begin</span><br><span class=\"line\">        (let ([q (make-queue)])</span><br><span class=\"line\">          (enqueue! q data)</span><br><span class=\"line\">          (hash-set! topic-hash key q)))))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (remove-data-from-topic topic-name)</span><br><span class=\"line\">  (if (contains-topic topic-name)</span><br><span class=\"line\">      (begin</span><br><span class=\"line\">        (let* ([datam (dequeue! (get-queue-for-topic topic-name))])</span><br><span class=\"line\">          ;(displayln (format &quot;::-&gt;~v&quot; datam)</span><br><span class=\"line\">          datam))</span><br><span class=\"line\">      (begin</span><br><span class=\"line\">        (let* ([rtn (format &quot;did not find topic ~v~%&quot; topic-name)])</span><br><span class=\"line\">          (display rtn)</span><br><span class=\"line\">          rtn))))</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">(define (get-queue-for-topic topic-name)</span><br><span class=\"line\">  ; just return the queue for this topic,</span><br><span class=\"line\">  ;  somebody  else has to check to see if the topic-name exists</span><br><span class=\"line\">      (hash-ref topic-hash topic-name))</span><br><span class=\"line\"></span><br><span class=\"line\">(define (request-&gt;jshash request)</span><br><span class=\"line\">  (string-&gt;jsexpr (bytes-&gt;string/utf-8 (request-post-data/raw request))))</span><br><span class=\"line\"></span><br><span class=\"line\">(provide topic-hash</span><br><span class=\"line\">         request-&gt;jshash</span><br><span class=\"line\">         get-queue-for-topic</span><br><span class=\"line\">         remove-data-from-topic</span><br><span class=\"line\">         add-data-to-topic</span><br><span class=\"line\">         )</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>The new thing here is the ‘provide’ statement.  Racket’s ‘provide’ exposes function calls in this file to external callers.  Exposing topic-hash  is not the best style, but we’ll fix that in the next article.</p>\n<h1 id=\"conclusion\">Conclusion<a title=\"#conclusion\" href=\"#conclusion\"></a></h1>\n<p>We have split the code and restructed it so we now have 2 files: the front-door and the middleware.  The middleware code exposes a set of functions to the front-door for manipulating the topic-hash. This code structure places functionality into specific files.  For the system at this point it might seem over kill. Once we start testing, we are going to expose a number of bugs.  Fixing the bugs will expand the code by a few lines. Taking the code all the way to the point were we might want to put this code into production is going to introduce even more changes.  We will use exception handling, which will clutter up the code even more and this restructure will separate the exception code, isolating it to the front-door file.</p>\n","prev":{"title":"A-message-queue-in-racket-part-5","link":"2021/10/25/A-message-queue-in-racket-part-5"},"next":{"title":"A-message-queue-in-racket-part-3","link":"2021/10/22/A-message-queue-in-racket-part-3"},"plink":"http://muguira-james.github.io/2021/10/24/A-message-queue-in-racket-part-4/","toc":[{"id":"table-of-contents","title":"Table of Contents","index":"1"},{"id":"introduction","title":"Introduction","index":"2"},{"id":"the-front-door","title":"The front-door","index":"3"},{"id":"the-middleware-code","title":"The middleware code","index":"4"},{"id":"conclusion","title":"Conclusion","index":"5"}],"reading_time":"1696 words in 11 min"}